jQuery(document).ready(function(a){function b(a){if(a.loading)return a.text;var b='<div class="clearfix"><div>'+a.name+"</div></div>";return b}function c(a){return a.name||a.text}function d(b,c){var d=a("#eventUsers");d.attr("disabled","disabled"),d.empty(),$url="/event/"+c+(b?"_"+b+"/eventuserlistintegra/":"/eventuserlist/")+f,a.get($url,function(b){a.each(b,function(a,b){d.append('<option value="'+b.id+'">'+b.name+"</option>")}),d.val(null).trigger("change"),d.removeAttr("disabled")},"json")}function e(){a("#eventUsers").find(":selected").length>0?a("#btnEventForgetRodo").removeAttr("disabled"):a("#btnEventForgetRodo").attr("disabled","disabled"),"delete"===a("input[name='renameDelete']:checked").val()?a("#newName").attr("disabled","disabled"):(a("#newName").removeAttr("disabled"),0==a("#newName").val().trim().length&&a("#btnEventForgetRodo").attr("disabled","disabled"))}const f=1;a("#tree-toggle").hide(),a("#form-doarchive").on("submit",function(){return a("#controlArchive").modal("hide"),a.post(a(this).prop("action"),{_token:a("#_token").val()},function(b){b.result&&1===b.result?SatelMessageDialog.show({alert:"info",message:a("#trans-save-ok").val()}):SatelMessageDialog.show({alert:"danger",message:b.message?b.message:a("#trans-save-error").val()})},"json").fail(function(){window.location.href="/logout"}),!1}),a("#form-archive").on("submit",function(){return a.post(a(this).prop("action"),{_token:a("#_token").val(),value_:a("#value_").val()},function(b){b.result&&1===b.result?SatelMessageDialog.show({alert:"info",message:a("#trans-save-ok").val()}):SatelMessageDialog.show({alert:"danger",message:a("#trans-save-error").val()})},"json").fail(function(){window.location.href="/logout"}),!1}),a("#eventUsers").select2({allowClear:!0,placeholder:"",closeOnSelect:!0}),a("#controlList").select2({minimumInputLength:1,ajax:{url:function(a){return encodeURI("/control/findbyname/?name="+a.term)},dataType:"json",delay:250,processResults:function(a){return{results:a}},cache:!0},allowClear:!0,placeholder:"",closeOnSelect:!0,escapeMarkup:function(a){return a},templateResult:b,templateSelection:c}),a("#controlList").on("select2:select",function(){a("#btnFilter").attr("disabled",!1)}),a("#controlList").on("change",function(a){var b=a.target.value,c=1;d(b,c)}),d(null,1),a("#eventUsers").on("change",e),a("#newName").on("change",e),a("#newName").on("keydown",e),a("#renameDelete1").on("click",e),a("#renameDelete2").on("click",e),a("#confirm-delete").on("show.bs.modal",function(b){a("#deletUser").empty(),a("#deletUser").append(a(b.relatedTarget).parents("form").find('select[name="eventUsers"]').find(":selected").text()),a("#deleteMessage").html(a("#renameDelete1").prop("checked")?a("#rodo-newname-qry").val():a("#rodo-delete-qry").val()),a("#newMessage").html(a("#renameDelete1").prop("checked")?a("#rodo-newname").val()+": <b>"+a(b.relatedTarget).parents("form").find('input[name="new-name"]').val()+"</b":""),a(this).find(".btn-ok").on("click",function(c){a(b.relatedTarget).parents("form").submit()})}),a("#rand").on("click",function(b){for(var c=16,d="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",f=e.length,g=0;c>g;g++)d+=e.charAt(Math.floor(Math.random()*f));a("#newName").val(d)})});