jQuery(document).ready(function(a){function b(b){b&&a.each(b,function(b,c){a('[name="accessList['+c.id+']"]').prop("checked",!0)})}function c(b){var c="undefined"!=typeof b?b:!0;a("#input-profileList").empty(),a.ajax({url:"/admin/roles/json",dataType:"json",async:c}).done(function(b){for(var c=0;c<b.length;c++){var d=b[c];a("#input-profileList").append('<option value="'+d.id+'" data-utype="'+d.userType+'">'+d.name+"</option>")}},"json")}function d(){var b;b=0===a("input[name^='accessList']:checked").length?!1:!0,a("#btn-profile").prop("disabled",!b)}function e(){a("#btn-editcancel").show(),a("#btn-profileremove").hide(),a("#input-profileList").prop("disabled",!0),a("#userType, #check-all, #check-invert,#check-none").prop("disabled",!1)}function f(b,d){var e=[];a("input[name^='accessList']:checked").each(function(){e.push(a(this).val())});var f={_token:a("input[name=_token]").val(),id:b,name:d,accessList:e};a.ajax({url:"/admin/roles",data:f,method:"post",dataType:"json"}).done(function(b){if(a("#modalNewProfile").modal("hide"),a("#btn-editcancel").trigger("click"),b.save){SatelMessageDialog.show({alert:"success",message:b.message}),a("#div-label-profile").hide(),a("#div-btn-profile").hide();var d=encodeURIComponent(a("#input-profileList").val());c(!1),a('#input-profileList option[value="'+d+'"]').prop("selected",!0),a("#input-profileList").change(),a("#input-profile").val("")}else SatelMessageDialog.show({alert:"success",message:b.message})}).fail(function(){SatelMessageDialog.show({alert:"danger",message:"ERROR"}),a("#modalNewProfile").modal("hide"),window.location.href="/logout"})}function g(){return a(window).width()>=(a(document).height()>a(window).height(),1200)}function h(b){if(b){a("#input-profileList").attr("size","25"),a("#input-profileList").addClass("roles-list");for(var c=a("#input-profileList option:first");c.length>0&&""===c.text()&&""===c.text();)c.remove(),c=a("#input-profileList option:first")}else a("#input-profileList").removeAttr("size"),a("#input-profileList").removeClass("roles-list"),""!==a("#input-profileList option:first").text()&&a("<option>",{value:"",selected:!0}).prependTo("#input-profileList")}a("#check-all").click(function(){a("#accessList input[type=checkbox]").prop("checked",!0),e(),d()}),a("#check-none").click(function(){a("#accessList input[type=checkbox]").prop("checked",!1),e(),d()}),a("#check-invert").click(function(){var b=a("#accessList input[type=checkbox]:checked"),c=a("#accessList input[type=checkbox]:not(:checked)");b.prop("checked",!1),c.prop("checked",!0),e(),d()}),a("#addLink").click(function(){a("#input-profileList").val("").change(),e()}),a("#input-profileList").on("change",function(){d(),a(".regular-checkbox, #check-all, #check-invert,#check-none").prop("disabled",!1)}),a("input[type=checkbox]").on("change",function(){e(),d()}),a("#btn-editcancel").click(function(){a("#btn-editcancel").hide(),a("#btn-profileremove").show(),a("#input-profileList").removeAttr("disabled"),a("#input-profileList").trigger("change"),a("#btn-profileremove").attr("disabled",!0),a("#input-profileList").prop("disabled",!1),a("#userType, #check-all, #check-invert,#check-none").prop("disabled",!0)}),a("#input-profileList").change(function(c){a("#btn-profileremove").data("id",c.target.value),"0"===c.target.value?(a("#div-label-accessList-btn").hide(),a("#div-label-accessList").show(),a("#div-label-profile").show(),a("#div-btn-profile").show(),a("#btn-profileremove").attr("disabled",!0),a("#accessList input[type=checkbox]").prop("checked",!1)):a.get("/admin/roles/"+c.target.value,function(c){a("#accessList input[type=checkbox]").prop("checked",!1),b(c.list),a("#div-label-accessList-btn").show(),a("#div-label-accessList").hide(),a("#div-label-profile").hide(),a("#div-btn-profile").hide(),a("#btn-profileremove").attr("disabled",!1)},"json"),d()}),a("#input-profile").on("keyup",function(){a("#input-profile").val().length>0?a("#newProfileOK").removeAttr("disabled"):a("#newProfileOK").attr("disabled","disabled")}),a("#modalNewProfile").on("shown.bs.modal",null,this,function(){a("#input-profile").trigger("keyup")}),a("#newProfileOK").click(function(){f(void 0,a("#input-profile").val())}),d(),a("#btn-profile").click(function(){null===a("#input-profileList").val()?a("#modalNewProfile").modal("show"):f(a("#input-profileList").val(),a("#input-profileList option:selected").text())}),a("#input-profile").on("focusin keyup",function(){d()}),h(g()),a(window).resize(function(){h(g())}),a("#confirmDeleteProfile form.profile-destroy").on("submit",function(){var b=a(this).serializeObject();return a.extend(b,{_token:a("input[name=_token]").val()}),a.ajax({type:b._method||"POST",dataType:"json",url:a(this).attr("action"),data:b,success:function(b){b.save?(c(),a("#input-profileList").trigger("change"),SatelMessageDialog.show({alert:"success",message:b.message})):SatelMessageDialog.show({alert:"danger",message:b.message,messageDetail:b.messageDetail})}}),!1}),a("#confirmDeleteProfile").on("show.bs.modal",function(b){var c=a(b.relatedTarget).data("id");a(this).find('.modal-footer input[name="id"]').val(c)}),a("#confirmDeleteProfile").find(".modal-footer #confirm").on("click",function(){var b=a(this).parents("form:first");b.submit()})});