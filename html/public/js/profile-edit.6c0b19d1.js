jQuery(document).ready(function(a){function b(b){b&&a.each(b,function(b,c){a('[name="accessList['+c.id+']"]').prop("checked",!0)})}function c(b){a("#userType").val(b)}function d(b){var c="undefined"!=typeof b?b:!0;a("#input-profileList").empty(),a.ajax({url:"/admin/profile/json",dataType:"json",async:c}).done(function(b){for(var c=0;c<b.length;c++){var d=b[c];a("#input-profileList").append('<option value="'+d.id+'" data-utype="'+d.userType+'">'+d.name+"</option>")}},"json")}function e(){var b;b=0===a("input[name^='accessList']:checked").length?!1:!0,a("#btn-profile").prop("disabled",!b)}function f(){a("#btn-editcancel").show(),a("#btn-profileremove").hide(),a("#input-profileList").prop("disabled",!0),a("#userType, #check-all, #check-invert,#check-none").prop("disabled",!1)}function g(b,c){var e=[];a("input[name^='accessList']:checked").each(function(){e.push(a(this).val())});var f={_token:a("input[name=_token]").val(),id:b,name:c,type:a("#userType").val(),accessList:e};a.ajax({url:"/admin/profile",data:f,method:"post",dataType:"json"}).done(function(b){if(a("#modalNewProfile").modal("hide"),a("#btn-editcancel").trigger("click"),b.save){SatelMessageDialog.show({alert:"success",message:b.message}),a("#div-label-profile").hide(),a("#div-btn-profile").hide();var c=encodeURIComponent(a("#input-profileList").val());d(!1),a('#input-profileList option[value="'+c+'"]').prop("selected",!0),a("#input-profileList").change(),a("#input-profile").val("")}else SatelMessageDialog.show({alert:"success",message:b.message})}).fail(function(){SatelMessageDialog.show({alert:"danger",message:"ERROR"}),a("#modalNewProfile").modal("hide"),window.location.href="/logout"})}function h(){return a(window).width()>=(a(document).height()>a(window).height(),1200)}function i(b){if(b){a("#input-profileList").attr("size","25"),a("#input-profileList").addClass("profile-list");for(var c=a("#input-profileList option:first");c.length>0&&""===c.text()&&""===c.text();)c.remove(),c=a("#input-profileList option:first")}else a("#input-profileList").removeAttr("size"),a("#input-profileList").removeClass("profile-list"),""!==a("#input-profileList option:first").text()&&a("<option>",{value:"",selected:!0}).prependTo("#input-profileList")}a("#check-all").click(function(){a("#accessList input[type=checkbox]").prop("checked",!0),f(),e()}),a("#check-none").click(function(){a("#accessList input[type=checkbox]").prop("checked",!1),f(),e()}),a("#check-invert").click(function(){var b=a("#accessList input[type=checkbox]:checked"),c=a("#accessList input[type=checkbox]:not(:checked)");b.prop("checked",!1),c.prop("checked",!0),f(),e()}),a("#addLink").click(function(){a("#input-profileList").val("").change(),f()}),a("#input-profileList").on("change",function(){e(),a("#userType, .regular-checkbox, #check-all, #check-invert,#check-none").prop("disabled",!1)}),a("input[type=checkbox]").on("change",function(){f(),e()}),a("#btn-editcancel").click(function(){a("#btn-editcancel").hide(),a("#btn-profileremove").show(),a("#input-profileList").removeAttr("disabled"),a("#input-profileList").trigger("change"),a("#btn-profileremove").attr("disabled",!0),a("#input-profileList").prop("disabled",!1),a("#userType, #check-all, #check-invert,#check-none").prop("disabled",!0)}),a("#input-profileList").change(function(d){a("#btn-profileremove").data("id",d.target.value),"0"===d.target.value?(a("#div-label-accessList-btn").hide(),a("#div-label-accessList").show(),a("#div-label-profile").show(),a("#div-btn-profile").show(),a("#btn-profileremove").attr("disabled",!0),a("#accessList input[type=checkbox]").prop("checked",!1)):a.get("/admin/profile/"+d.target.value,function(d){a("#accessList input[type=checkbox]").prop("checked",!1),b(d.list),c(d.usertypeid),a("#div-label-accessList-btn").show(),a("#div-label-accessList").hide(),a("#div-label-profile").hide(),a("#div-btn-profile").hide(),a("#btn-profileremove").attr("disabled",!1)},"json"),e()}),a("#userType").on("change",function(){e()}),a("#input-profile").on("keyup",function(){a("#input-profile").val().length>0?a("#newProfileOK").removeAttr("disabled"):a("#newProfileOK").attr("disabled","disabled")}),a("#modalNewProfile").on("shown.bs.modal",null,this,function(){a("#input-profile").trigger("keyup")}),a("#newProfileOK").click(function(){g(void 0,a("#input-profile").val())}),e(),a("#btn-profile").click(function(){null===a("#input-profileList").val()?a("#modalNewProfile").modal("show"):g(a("#input-profileList").val(),a("#input-profileList option:selected").text())}),a("#input-profile").on("focusin keyup",function(){e()}),i(h()),a(window).resize(function(){i(h())}),a("#confirmDeleteProfile form.profile-destroy").on("submit",function(){var b=a(this).serializeObject();return a.extend(b,{_token:a("input[name=_token]").val()}),a.ajax({type:b._method||"POST",dataType:"json",url:a(this).attr("action"),data:b,success:function(b){b.save?(d(),a("#input-profileList").trigger("change"),SatelMessageDialog.show({alert:"success",message:b.message})):SatelMessageDialog.show({alert:"danger",message:b.message,messageDetail:b.messageDetail})}}),!1}),a("#confirmDeleteProfile").on("show.bs.modal",function(b){var c=a(b.relatedTarget).data("id");a(this).find('.modal-footer input[name="id"]').val(c)}),a("#confirmDeleteProfile").find(".modal-footer #confirm").on("click",function(){var b=a(this).parents("form:first");b.submit()})});