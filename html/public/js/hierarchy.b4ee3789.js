jQuery(document).ready(function(a){function b(){a.get("/hierarchy/json",function(a){l.resolve(a)})}function c(){if(jQuery.isEmptyObject(a("#dataHierarchy").data("value")))a.get("/hierarchy/get",function(a){m.resolve(a)});else{var b=a("#dataHierarchy").data("value");m.resolve(b)}}function d(b){k=b.id,a("#hierarchyId").val(k),a("#id-remove").val(k),a("#name").val(b.name),a("#delethierarchy").text(b.name),a("#btnRemove").prop("disabled",!(k>1)),e(k,"#parentId"),h(window.location.hash.substr(1))}function e(b,c){if(a(c).empty(),1==b)return void a(c).append("<option> ---- </option>");var d="&nbsp&nbsp";g(j.hierarchyTreeList,b)?a(c).append('<option selected="selected" value="'+j.id+'">'+j.name+" </option>"):a(c).append('<option value="'+j.id+'">'+j.name+" </option>"),j.hierarchyTreeList&&f(j.hierarchyTreeList,d,b,c)}function f(b,c,d,e){var h="&nbsp&nbsp";a.each(b,function(b,i){if(i.id!=d&&(g(i.hierarchyTreeList,d)?a(e).append('<option selected="selected" value="'+i.id+'">'+c+i.name+" </option>"):a(e).append('<option value="'+i.id+'">'+c+i.name+" </option>"),i.hierarchyTreeList)){var j=c+h;f(i.hierarchyTreeList,j,d,e)}})}function g(b,c){var d=0;return b&&a.each(b,function(a,b){b.id==c&&(d=1)}),d}function h(b){a("#hierarchy-1").removeClass("in active"),a("#hierarchy-2").removeClass("in active"),"#create"===b||"create"===b?(a("#hierarchy-2").addClass("in active"),e(0,"#parentNew"),a("#parentNew").val(k)):a("#hierarchy-1").addClass("in active")}function i(){a("#wrapper").toggleClass("active"),a("#tree-toggle").hide(),setTimeout(function(){a("#sidebar-wrapper .btn-group").show()},500)}var j,k,l=a.Deferred(),m=a.Deferred();c(),b(),a.when(l,m).done(function(b,c){j=b,a(".tree-menu li a").click(function(){k=a(this).data("value"),a("#hierarchyId").val(k),a("#id-remove").val(k),a("#name").val(a(this).text()),a("#delethierarchy").text(a(this).text()),a("#btnRemove").prop("disabled",!(k>1)),e(k,"#parentId"),e(k,"#parentNew")}),d(c)}),a("#regionEdit").on("click",function(){h("#edit")}),a(".content-header a").on("shown",function(a){window.location.hash=a.target.hash}),a(".content-header a").click(function(){a("#message").empty(),h(a(this).attr("href"))}),a("#sidebar-wrapper .btn-group a").click(function(){var b=a(this).attr("href").split("#");h(b[1])}),a("#controlDestroy").on("shown.bs.modal",function(){}),a(document).on("tree-toggle-recvd",function(b,c){0==c?a("#togglechildren i").addClass("fa-toggle-off"):a("#togglechildren i").addClass("fa-toggle-on")}),a("#togglechildren").click(function(){a("#togglechildren i").toggleClass("fa-toggle-off fa-toggle-on"),"fa fa-toggle-off"===a("#togglechildren i").attr("class")?a.get("/hierarchy/0/putchildren",function(){}):a.get("/hierarchy/1/putchildren",function(){})}),i(),a("#sidebar-wrapper").perfectScrollbar({suppressScrollX:!0})});