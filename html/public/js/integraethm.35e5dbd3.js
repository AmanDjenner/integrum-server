jQuery(document).ready(function(a){function b(){"fa"!==a("#togglechildren i").attr("class")&&(g="fa fa-toggle-on"===a("#togglechildren i").attr("class"),h.resolve())}function c(){g=getToggleChildrenBool();var b=getCurrentRegionHierarchy(),c=b.id,e=b.name;null!=c&&(a("#idOffset").val(""),d(c,e))}function d(b,c){a("#message-tree").text(c),a("#hierarchytree").text(b),a("#hierarchytree").val(b),document.getElementById("btnFilter").disabled=!1,a("#form-filter-setting").trigger("submit")}function e(){a("form.ajax").on("submit",function(){var b=a(this).parents("tr"),c=a(this);return a.ajax({url:c.prop("action"),data:c.serialize(),method:"post",dataType:"json"}).done(function(c){1==c.status&&(b.attr("class",""),b.addClass(c.cssClass)),a(".deleteintegra").empty(),SatelMessageDialog.show({alert:"info",message:c.message})}).fail(function(){SatelMessageDialog.show({alert:"danger",message:"ERROR"})}),!1})}function f(b){b?(a("#toggleNotAssigned").removeClass("fa-toggle-off"),a("#toggleNotAssigned").addClass("fa-toggle-on")):(a("#toggleNotAssigned").removeClass("fa-toggle-on"),a("#toggleNotAssigned").addClass("fa-toggle-off"))}var g=!1,h=a.Deferred();a(document).on("tree-toggle-recvd",function(a,b){g=1==b,h.resolve()}),a.when(h).done(function(){c()}),a("#togglechildren").click(function(){h=a.Deferred(),b(),a.when(h).done(function(){a("#form-filter-setting").submit()})});var i=a("#idSpinner").hide();a(".tree-menu li a").click(function(){a("#message-tree").text(a(this).text()),a("#message-tree").val(a(this).text());var b=a(this).data("value");a("#hierarchytree").text(b),a("#hierarchytree").val(b),a.get("/hierarchy/"+b+"/put",function(){}),document.getElementById("btnFilter").disabled=!1,a("#form-filter-setting").trigger("submit")}),a("#form-filter-setting").on("submit",function(){return i.show(),a.post(a(this).prop("action"),{_token:a("#ptoken").val(),hierarchytreeid:a("#hierarchytree").val(),integraEthmName:a("#ethmName").val(),notAssigned:a("#notAssigned").val(),integraEthmIP:a("#ip").val(),withHierarchyChildren:g,version:a("#state-ethm-ver.btn").data("val"),mac:a("#state-ethm-mac.btn").data("val"),license:a("#state-ethm-lic.btn").data("val")},function(b){a("#integraTable").empty(),a(b).each(function(b,c){var d,e={1:"red",2:"green outlined",3:"yellow"},f={1:"red",2:"green outlined",3:"yellow"},g={1:"outlined",2:"",3:"blink"};d=c.integraId?'<a href="/control/'+c.integraId+'/edit">'+c.integra+"</a>":"-",a("#integraTable").append('<tr><td><a href="/ethm/'+c.id+'/edit"> '+c.name+" </a></td><td> "+c.ip+"</td><td>"+c.guardPort+"</td><td> "+d+'</td><td><div class="diode '+e[null===c.version?3:c.version>=204||c.version<200&&c.version>=109?2:1]+'" title="'+(null===c.version?"":c.version/100)+'"></div>                                               </td><td><div class="diode '+f[void 0!==c.mac?null!==c.mac?2:1:3]+'" title="'+(void 0!==c.mac?null===c.mac?"":c.mac:"")+'"></div>                                               </td><td><div class="diode red '+g[null!==c.license&&c.license===!0?1:2]+'"></div></td>\n < /td><td> '+c.action+" </td > < /tr>")}),e(),i.hide()},"json").fail(function(){window.location.href="/logout"}),!1}),a("#state-ethm-ver.btn, #state-ethm-mac.btn, #state-ethm-lic.btn").on("click",function(b){a(b.currentTarget).data("val",void 0===a(b.currentTarget).data("val")?!0:a(b.currentTarget).data("val")?!1:!0),a(b.currentTarget).data("val")?a(b.currentTarget).addClass("btn-warning active"):a(b.currentTarget).removeClass("btn-warning active"),a("#form-filter-setting").trigger("submit")}),a("#btn-filter-clear").click(function(){a("input#ethmName").val(""),a("input#ip").val(""),a("#state-ethm-ver.btn, #state-ethm-mac.btn, #state-ethm-lic.btn").removeClass("btn-warning active"),a("#state-ethm-ver.btn, #state-ethm-mac.btn, #state-ethm-lic.btn").data("val",!1),a("#form-filter-setting").submit()}),a("#toggleNotAssigned").click(function(){f(a("#toggleNotAssigned").hasClass("fa-toggle-off"))}),a("#form-filter-setting").on("submit",function(){a("#notAssigned").val(a("#toggleNotAssigned").hasClass("fa-toggle-on"))}),c(),b()});